<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Survey Page</title>

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
        integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
    <link rel="stylesheet" href="./styles/styles.css">
    <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" media="screen"
        href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.9.3/css/bootstrap-select.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <style>
        .tealFont {
            color: #5bc0de;
        }

        .modal {
            margin: 0 auto;
            background-color: #5bc0de;
            height: 700px;
        }

        /*
        .modal-body {
            overflow-y: auto;
            height: 650px;
        } */

        .modal-dialog,
        .modal-content {
            height: 90%;
        }

        .modal-body {
            /* 100% = dialog height, 60px = header + footer */
            max-height: calc(100% - 60px);
            overflow-y: scroll;
        }
    </style>
</head>

<body>
    <div class="modal" id="exampleModalLong" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Three top matches for you:</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-info" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <h3 class="text-center"><i class="fas fa-paw mr-2"></i>Survey Questions:</h3>
        <hr>
        <br>
        <div class="row">
            <div class="col-lg-12">
                <div class="card">
                    <div class="card-body">
                        <form role="form">
                            <div class="form-group">
                                <h5>Question 1</h5>
                                <h6>Do you consider yourself an extrovert?</h6>
                                <p class="font-italic">
                                    An extrovert is someone who is outgoing,
                                    talkative and the "life of the party."
                                </p>
                                <select class="selectpicker" title="Choose one of the options"
                                    data-selected-text-format="count" data-style="btn-info" id="selectExtra">
                                    <option value="0">Strongly disagree</option>
                                    <option value="1">To some degree</option>
                                    <option value="2">Strongly agree</option>
                                </select>
                                <hr>
                            </div>
                            <div class="form-group">
                                <h5>Question 2</h5>
                                <h6>Do you consider yourself an agreeable person?</h6>
                                <p class="font-italic">
                                    Agreeableness is a trait that makes people easy to get along with.
                                    Agreeable people sympathize with others,
                                    care about their feelings and try to make other people feel at ease.
                                </p>
                                <select class="selectpicker show-tick" title="Choose one of the options"
                                    data-selected-text-format="count" data-style="btn-info" id="selectAgree">
                                    <option value="0">Strongly disagree</option>
                                    <option value="1">To some degree</option>
                                    <option value="2">Strongly agree</option>
                                </select>
                                <hr>
                            </div>
                            <div class="form-group">
                                <h5>Question 3</h5>
                                <h6>Do you consider yourself a person with high conscientiousness?</h6>
                                <p class="font-italic">
                                    People who are conscientious are dutiful and self-disciplined.
                                    They like order and schedules.
                                </p>
                                <select class="selectpicker show-tick" title="Choose one of the options"
                                    data-selected-text-format="count" data-style="btn-info" id="selectConscien">
                                    <option value="0">Strongly disagree</option>
                                    <option value="1">To some degree</option>
                                    <option value="2">Strongly agree</option>
                                </select>
                                <hr>
                            </div>
                            <div class="form-group">
                                <h5>Question 4</h5>
                                <h6>Do you consider yourself a person with high emotional stability level?</h6>
                                <p class="font-italic">
                                    It's the opposite of neuroticism, a trait marked by anxiety.
                                    Irritation and stress.
                                    People low in neuroticism are calm, cool and collected.
                                </p>
                                <select class="selectpicker show-tick" title="Choose one of the options"
                                    data-selected-text-format="count" data-style="btn-info" id="selectEmot">
                                    <option value="0">Strongly disagree</option>
                                    <option value="1">To some degree</option>
                                    <option value="2">Strongly agree</option>
                                </select>
                                <hr>
                            </div>
                            <div class="form-group">
                                <h5>Question 5</h5>
                                <h6>Do you consider yourself a person with high level of openness?</h6>
                                <p class="font-italic">
                                    People with open personalities are intelligent,
                                    open to new experiences and appreciative of art.
                                </p>
                                <select class="selectpicker show-tick" title="Choose one of the options"
                                    data-selected-text-format="count" data-style="btn-info" id="selectOpen">
                                    <option value="0">Strongly disagree</option>
                                    <option value="1">To some degree</option>
                                    <option value="2">Strongly agree</option>
                                </select>
                                <hr>
                            </div>
                            <button type="submit" class="btn btn-info submit">Submit</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>


        <footer class="footer">
            <div class="container" style="color: #5bc0de">
                <p><a href="/api/furryfriends" class="tealFont">API Small Breeds Link</a> | <a
                        href="https://github.com/Haldevel/FurryFriendFinder" class="tealFont"> GitHub Repo</a>
            </div>
        </footer>

    </div>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.9.3/js/bootstrap-select.min.js"></script>

    <!-- <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script> -->
</body>

</html>

<script type="text/javascript">
    //add javascript for selectpicker functioning
    $(document).ready(function (e) {
        $('.selectpicker').selectpicker();
    });
    // On submit we grab selected answers from the corresponding select fields
    $(".submit").on("click", function (event) {
        event.preventDefault();

        var select1 = $("#selectExtra").val();
        console.log("select1: " + select1);

        var select2 = $("#selectAgree").val();
        console.log("select2: " + select2);

        var select3 = $("#selectConscien").val();
        console.log("select3: " + select3);

        var select4 = $("#selectEmot").val();
        console.log("select4: " + select4);

        var select5 = $("#selectOpen").val();
        console.log("select5: " + select5);

        // declare the object to hold a user's choices
        var user = {
            "scores": []
        };

        //push the scores /user selections to the array
        var userScores = [];
        userScores.push(select1);
        userScores.push(select2);
        userScores.push(select3);
        userScores.push(select4);
        userScores.push(select5);
        console.log(userScores);

        //set the 'scores' property of the object to the array with the user's selections
        user.scores = userScores;

        //The code below posts the user object to the specified route, and in the callback we receive the server
        //response with the array of three objects containg the data about three top matching breeds. 

        $.post("/api/furryfriends", user)

            .then(function (data) {
                if (data) {

                    var stringModal = "";
                    for (var i = 0; i < data.length; i++) {
                        stringModal += "<h6>" + data[i].breed + "</h6>";
                        stringModal += "<img src='" + data[i].image + "'><hr>";

                    }
                    //set a modal body to contain the html code with the values of top mathing breeds data
                    $(".modal-body").html(stringModal);
                    //show the modal
                    $("#exampleModalLong").modal('show');
                }
                else {
                    alert("Something went wrong...");
                }
            });
    });

</script>